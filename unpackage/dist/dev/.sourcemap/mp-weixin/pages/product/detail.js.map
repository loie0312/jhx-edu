{"version":3,"sources":["uni-app:///main.js","webpack:///C:/xcx/jhx/jhx/pages/product/detail.vue?f893","webpack:///C:/xcx/jhx/jhx/pages/product/detail.vue?c82d","webpack:///C:/xcx/jhx/jhx/pages/product/detail.vue?f702","webpack:///C:/xcx/jhx/jhx/pages/product/detail.vue?6f5d","uni-app:///pages/product/detail.vue","webpack:///C:/xcx/jhx/jhx/pages/product/detail.vue?5ea9","webpack:///C:/xcx/jhx/jhx/pages/product/detail.vue?cf01"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,gG;AACAA,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACc;;;AAGnE;AACoL;AACpL,gBAAgB,2LAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,oPAEN;AACL,GAAG;AACH;AACA,WAAW,yPAEN;AACL,GAAG;AACH;AACA,WAAW,sNAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1CA;AAAA;AAAA;AAAA;AAAwrB,CAAgB,srBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgF5sB;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;;;;AAIA,6D,snEAbA,0CAEA,4BAEA,kC;AAUA;AACA,oGADA;AAEA,MAFA,kBAEA;AACA;AACA,aADA,EACA;AACA,2BAFA,EAEA;AACA,kBAHA,EAGA;AACA,YAJA;AAKA;AACA,6BADA,EALA;;AAQA,mBARA;AASA,sBATA;AAUA,iBAVA,EAUA;AACA,yBAXA;AAYA,gBAZA;AAaA,qBAbA;AAcA;AACA;AACA,oBADA;AAEA,kBAFA;AAGA,uBAHA;AAIA;AACA,4BADA;AAEA,kBAFA;AAGA,uBAHA,EAJA,CAfA;;AAwBA;AACA;AACA,oBADA;AAEA,kCAFA;AAGA,qBAHA,EADA,CAxBA;;;AA+BA,uBA/BA;AAgCA,qBAhCA;AAiCA,mBAjCA;AAkCA,mBAlCA;AAmCA,sBAnCA;;AAqCA,GAxCA;AAyCA,QAzCA,kBAyCA,MAzCA,EAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAvDA;AAwDA;AACA,eAzDA,2BAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAjEA;AAkEA;AACA,mBAnEA,+BAmEA;AACA;AACA;AACA,oCADA;AAEA,yFAFA;;AAIA,GAzEA;AA0EA;AACA;;;;;;;;;AASA,kBAVA,0BAUA,IAVA,EAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA;AAMA;AACA;AACA;AACA,OAVA,MAUA;AACA;AACA;AACA,KAxBA;AAyBA;AACA,QA1BA,gBA0BA,GA1BA,EA0BA;AACA;AACA,KA5BA;AA6BA;AACA,SA9BA,iBA8BA,KA9BA,EA8BA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KApCA;AAqCA;AACA,SAtCA,iBAsCA,KAtCA,EAsCA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA;AAGA;AACA;AACA;AACA,KA/CA,EA1EA;;AA2HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA;AAOA,KAZA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OATA;AAUA,KA7BA;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA;AAKA,KAvCA;AAwCA;AACA,UAzCA,oBAyCA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,KApEA;AAqEA;AACA,cAtEA,wBAsEA;AACA,iCADA;AAEA,2FAFA;AAGA,KAzEA;AA0EA;AACA,uBA3EA,iCA2EA;AACA;AACA,iCADA;AAEA,6BAFA;;AAIA;AACA;AACA;AACA;AACA,uBADA;;AAGA,OANA;AAOA,KAvFA;AAwFA;AACA,oBAzFA,8BAyFA;AACA,qBADA,GACA;AACA,iDADA,EADA;;AAIA;AACA;AACA;AACA;AACA,gCADA;AAEA,mCAFA;;AAIA,iBAPA,EAJA;AAYA,KArGA;AAsGA;AACA,WAvGA,mBAuGA,CAvGA,EAuGA;AACA;AACA;AACA,mCADA;;AAGA,OAJA,MAIA;AACA;AACA;AACA,KA/GA;AAgHA;AACA,eAjHA,uBAiHA,CAjHA,EAiHA;AACA;AACA;AACA,gDADA;;AAGA;AACA,KAvHA;AAwHA;AACA,eAzHA,uBAyHA,GAzHA,EAyHA;AACA;AACA,KA3HA;AA4HA;AACA,WA7HA,qBA6HA;AACA;AACA,iCADA;;AAGA,KAjIA;AAkIA;AACA,eAnIA,yBAmIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,yBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA,GADA;;AAIA,UAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA,kBADA;AAEA,kBAFA;AAGA;AACA;AACA;AACA;AACA,qCAPA;AAQA,qBARA,mBAQA,GARA,EAQA;AACA;AACA;AACA;AACA;;AAEA,eAdA;AAeA,kBAfA,gBAeA,GAfA,EAeA;AACA;AACA;AACA,iCADA;;AAGA,eApBA,EAoBA,QApBA,oBAoBA,GApBA,EAoBA;AACA;AACA,eAtBA;;AAwBA,WA1BA,EA0BA,IA1BA;AA2BA,SA9BA;AA+BA,OA5GA;AA6GA,KAxQA;AAyQA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,4BAFA;;AAIA,wBAJA;;;;AAQA;;AAEA;AACA,gBADA;;;AAIA,SAhBA;;AAkBA,OApBA;;AAsBA,KAnSA;AAoSA;AACA,aArSA,uBAqSA;;AAEA;;AAEA;;AAEA,qBAFA;;;;AAMA;;AAEA,iCAFA;;AAIA,eAJA,qBAIA;;AAEA;;AAEA,0BAFA;;AAIA,wBAJA;;;;AAQA,SAdA;;AAgBA,gBAhBA,sBAgBA;;AAEA;;AAEA,SApBA;;;AAuBA,KAtUA;AAuUA;AACA;AACA,wBADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SARA,MAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAxBA,CAwBA;AACA,KAjWA;AAkWA;AACA;AACA;AACA,KArWA;AAsWA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,KA/WA;AAgXA,aAhXA,qBAgXA,OAhXA,EAgXA;AACA;AACA;AACA,2BADA,CACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;;AAGA;AACA;AACA;AACA;AACA;AACA,OALA;;AAOA,KApYA;AAqYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9YA,EA3HA,E;;;;;;;;;;;;;AC/FA;AAAA;AAAA;AAAA;AAAiwC,CAAgB,wrCAAG,EAAC,C;;;;;;;;;;;ACArxC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/product/detail.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/product/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=0e9671aa&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/product/detail.vue\"\nexport default component.exports","export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=template&id=0e9671aa&\"","var components = {\n  uniIcons: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n    )\n  },\n  jhxProductContent: function() {\n    return import(\n      /* webpackChunkName: \"components/jhx-product-content/jhx-product-content\" */ \"@/components/jhx-product-content/jhx-product-content.vue\"\n    )\n  },\n  uniGoodsNav: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-goods-nav/uni-goods-nav\" */ \"@/components/uni-goods-nav/uni-goods-nav.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm._f(\"money\")(\n    _vm.is_vip ? _vm.product.vip_price : _vm.product.real_price\n  )\n\n  var f1 = !_vm.is_vip ? _vm._f(\"toInt\")(_vm.vip_min_price) : null\n\n  var f2 = _vm._f(\"formatRichText\")(_vm.product.data.content)\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0,\n        f1: f1,\n        f2: f2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"uni-padding-wrap\">\r\n\t    <view class=\"page-section swiper\">\r\n\t        <view class=\"page-section-spacing\">\r\n\t            <swiper class=\"swiper\"  :autoplay=\"true\">\r\n\t                <swiper-item v-for=\"item in product.cover\">\r\n\t                    <image mode=\"widthFix\" class=\"swiper-item uni-bg-red\" :src=\"item\"></image>\r\n\t                </swiper-item>\r\n\t            </swiper>\r\n\t        </view>\r\n\t    </view>\r\n\t\t<view class=\"row\">\r\n\t\t\t<view class=\"product-name\">{{product.name}}</view>\r\n\t\t\t<view class=\"attr-line\">\r\n\t\t\t\t<span>共含{{product.content_count}}节课</span>\r\n\t\t\t\t<span>{{product.virtual_sale}}人购买</span>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"price-line\">\r\n\t\t\t\t<span v-if=\"(is_vip ? product.vip_price : product.real_price) > 0\">￥</span>\r\n\t\t\t\t<span class=\"price-big\">{{(is_vip ? product.vip_price : product.real_price) | money}}</span>\r\n\t\t\t\t<span class=\"market-price\">原价{{product.market_price}}</span>\r\n\t\t\t\t<!--  分享 -->\r\n\t\t\t\t<view class=\"share-section\" v-if=\"product.name\">\r\n\t\t\t\t\t<view class=\"share-icon\" @click=\"getSharePoster\">\r\n\t\t\t\t\t\t海报\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t<button :disabled=\"!!product\" class=\"share-btn\" open-type=\"share\">\r\n\t\t\t\t\t\t立即分享\r\n\t\t\t\t\t\t<i class=\"iconfont iconyou\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"common-line border-top\">\r\n\t\t\t\t<view class=\"label\">优惠</view>\r\n\t\t\t\t<view v-if=\"product.vip_price > 0 \">vip价格￥{{product.vip_price}}</view>\r\n\t\t\t\t<view v-else>vip免费</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-if=\"!is_vip\" class=\"open-vip\" @click=\"openVip()\">\r\n\t\t\t<view>{{vip_min_price | toInt}}元开通vip，享受优惠</view>\r\n\t\t\t<view>立即开通<uni-icons class=\"icon\" type=\"forward\"></uni-icons></view>\r\n\t\t</view>\r\n\t\t<view class=\"detail\">\r\n\t\t\t<view class=\"detail-items\">\r\n\t\t\t\t<view v-for=\"(item,index) in items\" :class=\"index == current ? 'active' : ''\" @click=\"onClickItem(index)\" class=\"detail-item\">\r\n\t\t\t\t\t<text class=\"text\">{{item}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"detail-content\" :class=\"current == 0 ? '' : 'hide'\">\r\n\t\t\t\t<rich-text :nodes=\"product.data.content | formatRichText\"></rich-text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"detail-content\" :class=\"current == 1 ? '' : 'hide'\">\r\n\t\t\t\t<jhx-product-content  :contents=\"content\" :is_vip=\"is_vip\" :status=\"contentStatus\" :buyed=\"buyed\" :column=\"1\"></jhx-product-content>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view style=\"height: 50px;width: 100%;\"></view>\r\n\t\t<uni-goods-nav :fill=\"true\"  :options=\"options\" :buttonGroup=\"buttonGroup\"  @click=\"onClick\" @buttonClick=\"buttonClick\" />\r\n\t\t<view class=\"show-box\" :class=\"showPoster ? '' : 'hide'\" id=\"post-box\" data-loaded=\"0\">\r\n\t\t\t<!-- canvas浏览，点击生成海报先绘画成canvas，然后canvas再储存为图片 -->\r\n\t\t\t<view :class=\"showSave ? 'hide' : ''\">\r\n\t\t\t\t<canvas canvas-id=\"shareCanvas\" id=\"shareCanvas\" width=\"300\" height=\"500\" class=\"poster\"></canvas>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"canvas-img\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view :class=\"showSave ? 'img' : 'hide'\">\r\n\t\t\t\t<img style=\"width: 100%;\" :src=\"posterImg\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"iconfont icon-cuowu close\" :class=\"showPoster ? '' : 'hide'\" @click='hiddenShare'>x</view>\r\n\t\t\t<view class=\"save\">{{showSave ? '长按图片保存到相册' : '正在生成...'}}</view>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t<view class='maskLayer' :class=\"showPoster ? '' : 'hide'\" @click='hiddenShare'></view>\r\n\t</view>\n</template>\n\n<script>\r\n\timport jhxProductContent from \"@/components/jhx-product-content/jhx-product-content.vue\";\r\n\timport {Product} from '@/model/product.js';\r\n\tvar productModel = new Product();\r\n\timport {User} from '@/model/user.js';\r\n\tvar user = new User();\r\n\timport {Common} from '@/utils/common.js';\r\n\tvar common = new Common();\r\n\timport uniIcons from \"@/components/uni-icons/uni-icons.vue\"\r\n\timport moment from '@/utils/moment';\r\n\timport uniGoodsNav from '@/components/uni-goods-nav/uni-goods-nav.vue';\r\n\timport  payment  from '@/utils/payment.js';\r\n\timport QRCode from \"@/utils/wxqrcode.js\" // 二维码生成器\r\n\t// #ifdef H5\r\n\tvar jweixin = require('jweixin-module');\r\n\t// #endif\r\n\timport { Config } from '../../config.js';\r\n\texport default {\r\n\t\tcomponents: {uniIcons,uniGoodsNav,jhxProductContent},\r\n\t    data() {\r\n\t        return {\r\n\t\t\t\tpage : 1, // 目录页码\r\n\t\t\t\tcontentStatus:'more', //目录加载状态,\r\n\t\t\t\tbuyed : false, //是否已购买该课程\r\n\t\t\t\tid:'',\r\n\t\t\t\tproduct:{\r\n\t\t\t\t\tdata:{content:''}\r\n\t\t\t\t},\r\n\t\t\t\tis_vip : false,\r\n\t\t\t\tvip_min_price:0,\r\n\t\t\t\tcontent:[], //目录\r\n\t\t\t\titems: ['详情', '目录'],\r\n\t\t\t\tcurrent: 0,\r\n\t\t\t\tfavorite:false,\r\n\t\t\t\t//底部\r\n\t\t\t\toptions: [{\r\n\t\t\t\t\ticon: 'home',\r\n\t\t\t\t\ttext: '首页',\r\n\t\t\t\t\tclass:'normal'\r\n\t\t\t\t},{\r\n\t\t\t\t\ticon: 'heart-filled',\r\n\t\t\t\t\ttext: '收藏',\r\n\t\t\t\t\tclass:'normal'\r\n\t\t\t\t}],\r\n\t\t\t\tbuttonGroup: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '购买专栏',\r\n\t\t\t\t\t\tbackgroundColor: '#ffa200',\r\n\t\t\t\t\t\tcolor: '#fff'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tshowPoster:false,\r\n\t\t\t\tshowSave:false,\r\n\t\t\t\tposterImg:'',\r\n\t\t\t\tqrcodeImg:'',\r\n\t\t\t\tproductImage:''\r\n\t        }\r\n\t    },\r\n\t    onLoad(option) {\r\n\t\t\tthis.user = uni.getStorageSync('userInfo');\r\n\t\t\tthis.$data.is_vip = this.isVip();\r\n\t\t\t//保存分销者的id\r\n\t\t\tif(option.pid){\r\n\t\t\t\tuni.setStorageSync('pid',option.pid);\r\n\t\t\t}\r\n\t\t\t//获取开通vip的最低价格\r\n\t\t\tif(!this.$data.is_vip){\r\n\t\t\t\tthis.getVipMin();\r\n\t\t\t}\r\n\t\t\tthis.id = option.id;\r\n\t\t\tthis.getDetail();\r\n\t\t\tthis.getContent();\r\n\t    },\r\n\t\t//加载更多\r\n\t\tonReachBottom() {\r\n\t\t\tif(this.contentStatus == 'noMore'){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(this.current == 1){\r\n\t\t\t\tthis.page++;\r\n\t\t\t\tthis.getContent();\r\n\t\t\t}\r\n\t\t},\r\n\t\t//分享\r\n\t\tonShareAppMessage() {\r\n\t\t\tvar uid = this.user && this.user.id ? this.user.id : '';\r\n\t\t\treturn {\r\n\t\t\t  title: this.$data.product.name,\r\n\t\t\t  path: Config.domain+'/pages/product/detail?id=' + this.id + '&pid='+uid\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t    /**\r\n\t\t\t * 处理富文本里的图片宽度自适应\r\n\t\t\t * 1.去掉img标签里的style、width、height属性\r\n\t\t\t * 2.img标签添加style属性：max-width:100%;height:auto\r\n\t\t\t * 3.修改所有style里的width属性为max-width:100%\r\n\t\t\t * 4.去掉<br/>标签\r\n\t\t\t * @param html\r\n\t\t\t * @returns {void|string|*}\r\n\t\t\t */\r\n\t\t\tformatRichText (html) { //控制小程序中图片大小\r\n\t\t\t\tif (html) {\r\n\t\t\t\t\tlet newContent = html.replace(/<img[^>]*>/gi, function(match, capture) {\r\n\t\t\t\t\t\t\t\tif(match.search(/style=/gi) == -1){\r\n\t\t\t\t\t\t\t\t\tmatch = match.replace(/\\<img/gi,'<img style=\"\"');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn match;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tnewContent = newContent.replace(/style=\"/gi, '$& max-width:100% !important; ');\r\n\t\t\t\t\t\t\tnewContent = newContent.replace(/<br[^>]*\\/>/gi, '');\r\n\t\t\t\t\t\t\treturn newContent;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '暂无详情'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 时间格式化\r\n\t\t\ttime(val) {\r\n\t\t\t\treturn moment(val * 1000).format('YYYY-MM-DD')\r\n\t\t\t},\r\n\t\t\t// 把0换成免费\r\n\t\t\tmoney(value) {\r\n\t\t\t\tif (value > 0){\r\n\t\t\t\t\treturn value\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn '免费'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//去掉小数点的0\r\n\t\t\ttoInt(value){\r\n\t\t\t\tif (value == parseInt(value)){\r\n\t\t\t\t    return parseInt(value)\r\n\t\t\t\t} else if (value == parseFloat(value)){\r\n\t\t\t\t\treturn parseFloat(value)\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t  return value\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//详情\r\n\t\t\tgetDetail:function(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar param = {'id':this.id};\r\n\t\t\t\tproductModel.view(param,(data) => {\r\n\t\t\t\t\tthat.$data.product=data.data;\r\n\t\t\t\t\tthat.favorite = data.data.myCollect ? true : false;\r\n\t\t\t\t\tthat.$data.options[1].class = that.favorite ? 'active' : 'normal';\r\n\t\t\t\t\tthat.current = data.data.show_type == 2 ? 1 : 0;\r\n\t\t\t\t\tthat.config();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//目录\r\n\t\t\tgetContent:function(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar page_size = 10;\r\n\t\t\t\tvar param = {'product_id':this.id,'page_size':page_size,'page':this.page};\r\n\t\t\t\tthat.$data.contentStatus = 'loading';\r\n\t\t\t\tproductModel.content(param,(data) => {\r\n\t\t\t\t\tthis.$data.buyed = data.data.buyed;\r\n\t\t\t\t\tvar items = that.content.concat(data.data.contents);\r\n\t\t\t\t\tthat.$data.content = items;\r\n\t\t\t\t\tif(data.data.contents.length < page_size){\r\n\t\t\t\t\t\tthat.$data.contentStatus = 'noMore';\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthat.$data.contentStatus = 'more';\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//vip最低价\r\n\t\t\tgetVipMin:function(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar param = {'id':this.id};\r\n\t\t\t\tuser.vipMin(param,(data) => {\r\n\t\t\t\t\tif(data.data){\r\n\t\t\t\t\t\tthat.$data.vip_min_price = data.data.price\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//分享配置\r\n\t\t\tconfig(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tpayment.wxConfigH5();\r\n\t\t\t\t\r\n\t\t\t\tjweixin.ready(() => {\r\n\t\t\t\t\tvar uid = this.user && this.user.id ? this.user.id : '';\r\n\t\t\t\t\t//自定义“分享给朋友”及“分享到QQ”按钮的分享内容（1.4.0）\r\n\t\t\t\t\tjweixin.updateAppMessageShareData({ \r\n\t\t\t\t\t    title: that.$data.product.name, // 分享标题\r\n\t\t\t\t\t    desc: '分享一个很好的课程给你', // 分享描述\r\n\t\t\t\t\t    link: Config.domain+'/pages/product/detail?id=' + that.$data.product.id + '&pid='+uid, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致\r\n\t\t\t\t\t    imgUrl: that.$data.product.picture, // 分享图标\r\n\t\t\t\t\t    success: function () {\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t})\r\n\t\t\t\t\t//自定义“分享到朋友圈”及“分享到QQ空间”按钮的分享内容（1.4.0）\r\n\t\t\t\t\tjweixin.updateTimelineShareData({ \r\n\t\t\t\t\t\ttitle: that.$data.product.name, // 分享标题\r\n\t\t\t\t\t\tlink: Config.domain+'/pages/product/detail?id=' + that.$data.product.id + '&pid='+uid, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致\r\n\t\t\t\t\t\timgUrl: that.$data.product.picture, // 分享图标\r\n\t\t\t\t\t\tsuccess: function () {\r\n\t\t\t\t\t\t  // 设置成功\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t// 收藏\r\n\t\t\tasync toFavorite() {\r\n\t\t\t\tif (!this.product.id) return;\r\n\t\t\t\tthis.favorite ? this.handleCollectDel() : this.handleCollectCreate();\r\n\t\t\t},\r\n\t\t\t// 收藏商品\r\n\t\t\thandleCollectCreate() {\r\n\t\t\t\tvar param = {\r\n\t\t\t\t\ttopic_id: this.product.id,\r\n\t\t\t\t\ttopic_type: 'product'\r\n\t\t\t\t}\r\n\t\t\t\tproductModel.collectCreate(param,(data) => {\r\n\t\t\t\t\tthis.favorite = !this.favorite;\r\n\t\t\t\t\tthis.$data.options[1].class = this.favorite ? 'active' : 'normal';\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'收藏成功'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 取消收藏商品\r\n\t\t\tasync handleCollectDel() {\r\n\t\t\t\tvar param = {\r\n\t\t\t\t\tid: this.product.myCollect.id,\r\n\t\t\t\t}\r\n\t\t\t\tproductModel.collectDelete(param,(data) => {\r\n\t\t\t\t\tthis.favorite = !this.favorite;\r\n\t\t\t\t\tthis.$data.options[1].class = this.favorite ? 'active' : 'normal';\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\ttitle:'取消收藏成功'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//首页\r\n\t\t\tonClick (e) {\r\n\t\t\t\tif(e.index == 0){\r\n\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\turl:'/pages/index/index'\r\n\t\t\t\t\t})\r\n\t\t\t\t}else if(e.index == 1){\r\n\t\t\t\t\tthis.toFavorite();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//去购买\r\n\t\t\tbuttonClick (e) {\r\n\t\t\t\tif(e.index == 0){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:'buy?product_id='+this.$data.id\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//详情和目录切换\r\n\t\t\tonClickItem(val) {\r\n\t\t\t\tthis.$data.current = val\r\n\t\t\t},\r\n\t\t\t//跳转到开通会员\r\n\t\t\topenVip(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'/pages/user/vipbuy'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//画海报\r\n\t\t\tpaintPoster() {\r\n\t\t\t\tconst _this = this\r\n\t\t\t\t_this.showPoster = true;\r\n\t\t\t\tif (this.isPosted) {\r\n\t\t\t\t\t_this.showShare = false;\r\n\t\t\t\t\t_this.showSave = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar goods_name = this.product ? this.product.name: '以墨文化';\r\n\t\t\t\tvar productImage = this.product ? this.product.cover[0] : '';\r\n\t\t\t\tif (!goods_name || !productImage) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"分享信息正在加载，请稍后重试\",\r\n\t\t\t\t\t\ticon:'loading'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t// uni.showLoading({\r\n\t\t\t\t// \ttitle: '生成图片中~',\r\n\t\t\t\t// \tmask: true\r\n\t\t\t\t// })\r\n\t\t\t\t_this.$data.showShare = false;\r\n\t\t\t\t_this.isShare = true\r\n\t\t\t\tconst wxGetImageInfo = _this.promisify(uni.getImageInfo)\r\n\t\t\t\tPromise.all([\r\n\t\t\t\t\twxGetImageInfo({\r\n\t\t\t\t\t\tsrc: productImage\r\n\t\t\t\t\t})\r\n\t\t\t\t]).then(res => {\r\n\t\t\t\t\tvar sWidth = uni.getSystemInfoSync().windowWidth;\r\n\t\t\t\t\tvar sHeight = uni.getSystemInfoSync().windowHeight;\r\n\t\t\t\t\tconst ctx = uni.createCanvasContext('shareCanvas');\r\n\t\t\t\t\tvar width = parseInt(sWidth*0.8);\r\n\t\t\t\t\tvar height = 450;\r\n\t\t\t\t\tctx.drawImage(this.qrcodeImg, 100, width*0.66 + 100, 100, 100);\r\n\t\t\t\t\t//画布白色背景\r\n\t\t\t\t\tctx.setFillStyle('#FFFFFF')\r\n\t\t\t\t\tctx.fillRect(0, 0, width, height);\r\n\t\t\t\t\t//网站标题\r\n\t\t\t\t\tctx.setFontSize(14);\r\n\t\t\t\t\tctx.setFillStyle('#ff6600');\r\n\t\t\t\t\tvar num = parseInt((width - 110) / 14) * 2;\r\n\t\t\t\t\tvar desc =  '以墨文化';\r\n\t\t\t\t\tvar rs = _this.textByteLength(desc, num);\r\n\t\t\t\t\trs[1].forEach((item, index) => {\r\n\t\t\t\t\t\tctx.fillText(item, 20, 30 + 20 * index);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t//商品图片\r\n\t\t\t\t\tctx.drawImage(_this.productImage, 20, 50, width-40, (width-40)*0.66);\r\n\t\t\t\t\t//商品名称\r\n\t\t\t\t\tctx.setFontSize(14);\r\n\t\t\t\t\tctx.setFillStyle('#333');\r\n\t\t\t\t\tvar num = parseInt((width - 40) / 14) * 2\r\n\t\t\t\t\tvar rs = _this.textByteLength(goods_name, num);\r\n\t\t\t\t\tvar baseHeight = width*0.66+40;\r\n\t\t\t\t\trs[1].forEach((item, index) => {\r\n\t\t\t\t\t\tctx.fillText(item, 20, baseHeight + 20 * index);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t//价格\r\n\t\t\t\t\tctx.setFontSize(12);\r\n\t\t\t\t\tctx.setFillStyle('#ff6600');\r\n\t\t\t\t\tvar num = parseInt((width - 40) / 14) * 2\r\n\t\t\t\t\tvar rs = _this.textByteLength(\"￥\", num);\r\n\t\t\t\t\tvar baseHeight = width*0.66+80;\r\n\t\t\t\t\trs[1].forEach((item, index) => {\r\n\t\t\t\t\t\tctx.fillText(item, 20, baseHeight + 20 * index);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t//价格\r\n\t\t\t\t\tctx.setFontSize(16);\r\n\t\t\t\t\tctx.setFillStyle('#ff6600');\r\n\t\t\t\t\tvar num = parseInt((width - 40) / 14) * 2\r\n\t\t\t\t\tvar rs = _this.textByteLength(this.product?this.product.real_price:'', num);\r\n\t\t\t\t\tvar baseHeight = width*0.66+80;\r\n\t\t\t\t\trs[1].forEach((item, index) => {\r\n\t\t\t\t\t\tctx.fillText(item, 30, baseHeight + 20 * index);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t//原价\r\n\t\t\t\t\tctx.setFontSize(12);\r\n\t\t\t\t\tctx.setFillStyle('#999');\r\n\t\t\t\t\tvar num = parseInt((width - 40) / 14) * 2\r\n\t\t\t\t\tvar market = this.product?this.product.market_price:'';\r\n\t\t\t\t\tmarket = '原价：'+ market;\r\n\t\t\t\t\tvar rs = _this.textByteLength(market, num);\r\n\t\t\t\t\tvar baseHeight = width*0.66+80;\r\n\t\t\t\t\trs[1].forEach((item, index) => {\r\n\t\t\t\t\t\tctx.fillText(item, 90, baseHeight + 20 * index);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t//二维码 \r\n\t\t\t\t\tctx.drawImage(this.qrcodeImg, 100, width*0.66 + 100, 100, 100);\r\n\t\t\t\t\t//描述\r\n\t\t\t\t\t// ctx.setFontSize(14);\r\n\t\t\t\t\t// ctx.setFillStyle('#ff6600');\r\n\t\t\t\t\t// var num = parseInt((width - 110) / 14) * 2;\r\n\t\t\t\t\t// var desc = _this.configData ? _this.configData.share_desc : '课程火热抢购中';\r\n\t\t\t\t\t// var rs = _this.textByteLength(desc, num);\r\n\t\t\t\t\t// var baseHeight = width+100;\r\n\t\t\t\t\t// rs[1].forEach((item, index) => {\r\n\t\t\t\t\t// \tctx.fillText(item, 115, baseHeight + 20 * index);\r\n\t\t\t\t\t// })\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.draw(true, function() {\r\n\t\t\t\r\n\t\t\t\t\t\t// 不延迟图片可能会是半透明状态\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t//canvas转为图片\r\n\t\t\t\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\t\t\t// width: 375,\r\n\t\t\t\t\t\t\t\t// height: 600,\r\n\t\t\t\t\t\t\t\t// destWidth: 750 * 750 / uni.getSystemInfoSync().windowWidth, //防止图片模糊\r\n\t\t\t\t\t\t\t\t// destHeight: 1200 * 750 / uni.getSystemInfoSync().windowWidth,\r\n\t\t\t\t\t\t\t\tcanvasId: 'shareCanvas',\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t_this.isShare = false\r\n\t\t\t\t\t\t\t\t\t_this.isPosted = true;\r\n\t\t\t\t\t\t\t\t\t_this.showSave = true;\r\n\t\t\t\t\t\t\t\t\t_this.posterImg = res.tempFilePath;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail(res){\r\n\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle:'海报生成失败'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t},complete(res) {\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpromisify: api => {\r\n\t\t\t\r\n\t\t\t\t//return一个匿名函数 options对象中是src图片路径传入的路径\r\n\t\t\t\r\n\t\t\t\treturn (options) => {\r\n\t\t\t\r\n\t\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\r\n\t\t\t\t\t\tconst extras = {\r\n\t\t\t\r\n\t\t\t\t\t\t\tsuccess: resolve,\r\n\t\t\t\r\n\t\t\t\t\t\t\tfail: reject\r\n\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t\t//调用api api中options是传入的图片路径，extras是api执行的成功和失败的函数\r\n\t\t\t\r\n\t\t\t\t\t\tapi({ ...options,\r\n\t\t\t\t\t\t\t...extras\r\n\t\t\t\t\t\t})\r\n\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\t//保存图片\r\n\t\t\tsaveImage() {\r\n\t\t\t\r\n\t\t\t\tconst _this = this\r\n\t\t\t\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\r\n\t\t\t\t\ttitle: '保存中~'\r\n\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\r\n\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\r\n\t\t\t\t\tfilePath: _this.posterImg,\r\n\t\t\t\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\r\n\t\t\t\t\t\t\ttitle: '保存成功！',\r\n\t\t\t\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\r\n\t\t\t\t\tcomplete() {\r\n\t\t\t\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// text为传入的文本  num为单行显示的字节长度\r\n\t\t\ttextByteLength: function(text, num) {\r\n\t\t\t\tlet strLength = 0; // text byte length\r\n\t\t\t\tlet rows = 1;\r\n\t\t\t\tlet str = 0;\r\n\t\t\t\tlet arr = [];\r\n\t\t\t\tfor (let j = 0; j < text.length; j++) {\r\n\t\t\t\t\tif (text.charCodeAt(j) > 255) {\r\n\t\t\t\t\t\tstrLength += 2;\r\n\t\t\t\t\t\tif (strLength > rows * num) {\r\n\t\t\t\t\t\t\tstrLength++;\r\n\t\t\t\t\t\t\tarr.push(text.slice(str, j));\r\n\t\t\t\t\t\t\tstr = j;\r\n\t\t\t\t\t\t\trows++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstrLength++;\r\n\t\t\t\t\t\tif (strLength > rows * num) {\r\n\t\t\t\t\t\t\tarr.push(text.slice(str, j));\r\n\t\t\t\t\t\t\tstr = j;\r\n\t\t\t\t\t\t\trows++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tarr.push(text.slice(str, text.length));\r\n\t\t\t\treturn [strLength, arr, rows] //  [处理文字的总字节长度，每行显示内容的数组，行数]\r\n\t\t\t},\r\n\t\t\t//画海报\r\n\t\t\tgetSharePoster: function() {\r\n\t\t\t\tthis._makeCode(\"http://wx.qzlhslgy.com/pages/product/detail?id=\"+this.id);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 隐藏分享弹框\r\n\t\t\t */\r\n\t\t\thiddenShare: function() {\r\n\t\t\t\tthis.$data.showShare = false;\r\n\t\t\t\tthis.$data.showFriend = false;\r\n\t\t\t\tthis.$data.showPoster = false;\r\n\t\t\t\tthis.showSave = false;\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t},\r\n\t\t\t_makeCode(content) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tlet img = QRCode.createQrCodeImg(content, {  \r\n\t\t\t\t     size: parseInt(110)//二维码大小  \r\n\t\t\t\t})\r\n\t\t\t\tthis.qrcodeImg = img;\r\n\t\t\t\tlet image = new Image();\r\n\t\t\t\t// 解决跨域 Canvas 污染问题\r\n\t\t\t\timage.setAttribute(\"crossOrigin\", \"anonymous\");\r\n\t\t\t\timage.src =  this.product ? this.product.cover[0] : '';\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle:'正在加载图片...'\r\n\t\t\t\t})\r\n\t\t\t\timage.onload=function(){\r\n\t\t\t\t\tvar base64=that.getBase64Image(image);\r\n\t\t\t\t\tthat.productImage = base64;\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tthat.paintPoster();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tgetBase64Image:function(img){\r\n\t\t\t\tvar canvas=document.createElement(\"canvas\");\r\n\t\t\t\tcanvas.width=img.width;\r\n\t\t\t\tcanvas.height=img.height;\r\n\t\t\t\tvar ctx=canvas.getContext(\"2d\");\r\n\t\t\t\tctx.drawImage(img,0,0,img.width,img.height);\r\n\t\t\t\tvar ext=img.src.substring(img.src.lastIndexOf(\".\")+1).toLowerCase();\r\n\t\t\t\tvar dataUrl=canvas.toDataURL(\"images/\"+ext);\r\n\t\t\t\treturn dataUrl;\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style lang=\"scss\">\r\n\t.swiper{height: 500rpx;}\r\n\t.swiper-item{width: 100%;}\r\n\t.detail-items{border-bottom:1px solid $uni-border-color;display: flex;}\r\n\t.detail-item{flex:1;text-align: center;}\r\n\t.detail-item .text{line-height: 80rpx;padding: 20rpx 0; }\r\n\t.active .text{border-bottom: 4rpx solid $uni-color-base;}\r\n\t.detail{background-color: #fff;padding: 10rpx 0;margin-top: 15rpx;}\r\n\t.detail-content{padding: 20rpx 20rpx 0 20rpx ;}\r\n\t.row{background-color: #fff;padding: 0 3%;}\r\n\t.product-name{padding: 20rpx 0 0 0;font-size: $uni-font-size-lg;font-weight: bold;}\r\n\t.price-line{color: $uni-color-base;padding: 20rpx 0 0 0;}\r\n\t.market-price{color: #999;font-size: $uni-font-size-sm;text-decoration: line-through;margin-left: 40rpx;}\r\n\t.attr-line{font-size: $uni-font-size-sm;color: $uni-text-color-grey;padding: 20rpx 0 0 0;}\r\n\t.attr-line span{margin-right: 40rpx;}\r\n\t.open-vip{background-color: #f9e5bf;padding: 20rpx 3%;display: flex;justify-content: space-between;}\r\n\t.border-top{border-top:1px solid $uni-border-color;margin-top: 20rpx;}\r\n\t.share-icon{position: fixed;right: 0; top:650rpx;background-color: rgba(#ececec,0.6);padding: 10rpx 20rpx;border-top-left-radius: 30rpx;border-bottom-left-radius: 30rpx;}\r\n\t/*分享*/\r\n\t\r\n\t#post-box {\r\n\t\twidth: 80%;\r\n\t\tleft: 10%;\r\n\t\ttop: 5%;\r\n\t\tbackground-color: #fff;\r\n\t\tposition: fixed;\r\n\t\tz-index: 1001;\r\n\t}\r\n\t.poster {\r\n\t\twidth: 300px;\r\n\t\theight: 500px;\r\n\t\tborder: 1px solid none;\r\n\t\tmargin: 0 auto;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\t.maskLayer {\r\n\t\tleft: 0;\r\n\t\tz-index: 1000;\r\n\t}\r\n\t.close {\r\n\t\ttext-align: right;\r\n\t\tcolor: #999;\r\n\t\tfont-size: 22px;\r\n\t\tbackground-color: #fff;\r\n\t\tborder: 1px solid #ececec;\r\n\t\tposition: absolute;\r\n\t\ttop: -17px;\r\n\t\tright: -17px;\r\n\t\twidth: 30px;\r\n\t\theight: 30px;\r\n\t\tline-height: 30px;\r\n\t\tborder-radius: 50%;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.save {\r\n\t\tbackground-color: #f9f9f9;\r\n\t\tcolor: #333;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 30px;\r\n\t\tpadding: 15px 0;\r\n\t\tmargin-top: 10px;\r\n\t\tline-height: 1;\r\n\t\tfont-size: 28rpx;\r\n\t}\n</style>\n","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1609905345444\n      var cssReload = require(\"C:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}